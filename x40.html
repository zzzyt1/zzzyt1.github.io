<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./css/index.css">
    <link rel="stylesheet" href="./css/mb-index.css">
    <style>
        body,
        html {
            margin: 0;
            padding: 0;
        }
    </style>
    <style>
        @font-face {
            font-family: 'Poppins-Bold';
            src: url('./fonts/Poppins-Bold.ttf') format('truetype');
        }

        @font-face {
            font-family: 'Poppins-Light';
            src: url('./fonts/Poppins-Light.ttf') format('truetype');
        }

        @font-face {
            font-family: 'Poppins-Medium';
            src: url('./fonts/Poppins-Medium.ttf') format('truetype');
        }

        @font-face {
            font-family: 'Poppins-Regular';
            src: url('./fonts/Poppins-Regular.ttf') format('truetype');
        }

        @font-face {
            font-family: 'Poppins-SemiBold';
            src: url('./fonts/Poppins-SemiBold.ttf') format('truetype');
        }
    </style>
    <script src="./lib/jquery-3.4.1.mini.js"></script>
</head>

<body>

    <div class="fav-new-desc">
        <div class="section section1">
            <div class="wrapper contain">
                <div class="wrapper1">
                    <img class="pic" data-src="https://cdn.shopify.com/s/files/1/0548/8594/1300/files/x40-2.jpg"
                        data-mbsrc="https://cdn.shopify.com/s/files/1/0548/8594/1300/files/x40-mb-2.jpg" alt="">
                    <h1 class="fz1 textH1">
                        Minimalist<br>
                        Lifestyle
                    </h1>
                    <div class="text-box">
                        <h1 class="fz1">
                            Minimalist<br>
                            Lifestyle
                        </h1>
                        <div class="fz2 desc">
                            Simplify your charging routine with this all-in-one stand and enjoy a minimalist lifestyle
                            free from tangled cables.
                        </div>
                    </div>
                    <img src="https://cdn.shopify.com/s/files/1/0548/8594/1300/files/x40-line.png" class="line" alt="">
                </div>
                <div class="wrapper2">
                    <img src="https://cdn.shopify.com/s/files/1/0548/8594/1300/files/x40-line.png" class="line" alt="">
                    <img data-src="https://cdn.shopify.com/s/files/1/0548/8594/1300/files/x40-1_26290b00-0435-4a1a-8eb5-b74859de0763.jpg"
                        data-mbsrc="https://cdn.shopify.com/s/files/1/0548/8594/1300/files/x40-mb-1.jpg" alt="">
                </div>
            </div>
            <div class="mb wrapper-mb"></div>
        </div>
        <div class="section section2">
            <div class="video-wrapper">
                <video src="https://cdn.shopify.com/videos/c/o/v/a67e348a4e874a5ab5ba60025ab7f01f.mp4" autoplay muted
                    loop poster="https://cdn.shopify.com/s/files/1/0548/8594/1300/files/x40-15.jpg"></video>
                <img class="poster" src="https://cdn.shopify.com/s/files/1/0548/8594/1300/files/x40-15.jpg" alt="">
            </div>
            <div class="text-box">
                <h1 class="fz1">Less is More</h1>
                <div class="fz2 desc">
                    3-IN-1<br>
                    Wireless Charging
                </div>
                <img class="pic" src="https://cdn.shopify.com/s/files/1/0548/8594/1300/files/x40-3.png" alt="">
            </div>
        </div>
        <div class="section section3">
            <div class="contain">
                <div class="fast-text1-box an2">
                    <div class="text1 fz1 an1">
                        Fast
                    </div>
                </div>

                <div class="fast-text2-box an2">
                    <div class="text2 fz1 an1">
                        charging
                    </div>
                </div>

                <div class="wrapper an1">
                    <div class="prod">
                        <img src="https://cdn.shopify.com/s/files/1/0548/8594/1300/files/x40-4.png" alt="">
                    </div>
                    <div class="text1 fz1 an2">
                        Compatible<br>
                        WPC 1.2.4
                    </div>
                    <div class="text2 fz2 an2">
                        3W-5W-7.5W-10W-15W-22W<br>
                        Intelligent recognition
                    </div>
                    <div class="phone-pic-wrapper an3">
                        <div class="phone-pic">
                            <img src="https://cdn.shopify.com/s/files/1/0548/8594/1300/files/x40-6.png" alt="">
                            <img src="https://cdn.shopify.com/s/files/1/0548/8594/1300/files/x40-6-1.png"
                                class="an4 charge" alt="">
                        </div>
                    </div>

                </div>
            </div>

        </div>

        <div class="section section4">
            <div class="contain">
                <div class="text1-wrapper an1">
                    <h1 class="fz1 text1 an2">
                        Foldable Compact
                    </h1>
                </div>

                <div class="fz2 text2 an1">
                    When folded, the X40 is only half the size of a mobile phone and weighs just 159g. Easily fit it in
                    your
                    bag or pocket, a must-have for travel.
                </div>
                <div class="prod-wrapper an1">
                    <img class="prod an2" data-src="https://cdn.shopify.com/s/files/1/0548/8594/1300/files/x40-7.jpg"
                        alt="">
                </div>
            </div>

        </div>

        <div class="section section5">
            <div class="contain">
                <div class="text-box">
                    <h1 class="text1 fz1">
                        Powerful<br>
                        Magnetic Attraction
                    </h1>
                    <div class="desc fz2">
                        Equipped with 8 built-in<br class="mb">multi-pole neodymium magnets,<br class="mb">providing a
                        magnetic attraction<br class="mb">of over
                        800g
                    </div>
                </div>
                <div class="prod1">
                    <img class="an1" src="https://cdn.shopify.com/s/files/1/0548/8594/1300/files/x40-8.png" alt="">
                </div>
                <div class="prod2">
                    <img src="https://cdn.shopify.com/s/files/1/0548/8594/1300/files/x40-9.png" alt="">
                </div>
            </div>

        </div>
        <div class="section section6">
            <img src="https://cdn.shopify.com/s/files/1/0548/8594/1300/files/x40-10.png" class="text1 transi-hidden"
                alt="">
            <div class="box">
                <div class="b1">Sandblasting</div>
                <div class="b2">CNC</div>
                <div class="b3">Oxidation</div>
            </div>
            <div class="wz1">The KUXIU X40 is crafted using <br>
                aluminum alloy with CNC machining. <br>
                It undergoes meticulous processes such <br>
                as sandblasting, oxidation <br>
                and intricate assembly procedures. <br>
                We strive for perfection in every step of <br> the way.</div>
        </div>
        <div class="section section7">
            <div class="wz1 fz1 transi-hidden">Package includes</div>
            <div class="wz2 transi-hidden">Note: Charger not included</div>
            <div class="box1 transi-hidden">
                <div class="pic1 item">
                    <img data-src="https://cdn.shopify.com/s/files/1/0548/8594/1300/files/x40-12.jpg"
                        data-mbsrc="https://cdn.shopify.com/s/files/1/0548/8594/1300/files/x40-mb-12.jpg" alt="">
                    <div class="text">X40 3-in-1<br> Stand *1</div>
                </div>
                <div class="pic2 item">
                    <img data-src="https://cdn.shopify.com/s/files/1/0548/8594/1300/files/x40-11.jpg" alt="">
                    <div class="text">
                        <span class="t1">( Choose One )</span>
                        <span class="t2">Type-C cable *1</span>
                    </div>
                </div>
                <div class="pic3 item">
                    <img data-src="https://cdn.shopify.com/s/files/1/0548/8594/1300/files/x40-13.png"
                        data-mbsrc="https://cdn.shopify.com/s/files/1/0548/8594/1300/files/x40-mb-13.jpg" alt="">
                    <div class="text">Storage<br> Bag *1</div>
                </div>
            </div>
        </div>

        <!-- <div class="section video-wrapper section8">
            <div class="title fz1">Video</div>
            <div class="swiper-container s8-swiper video-list">
                <div class="swiper-wrapper">
                    <div class="swiper-slide first-slide">
                        <video loop src="./video/INS+mnml_visuals.mp4" poster="./poster/1.jpg"></video>
                        <div class="video-cover">
                            <svg t="1684575349179" class="icon" viewBox="0 0 1024 1024" version="1.1"
                                xmlns="http://www.w3.org/2000/svg" p-id="2403" width="200" height="200">
                                <path d="M102.425742 102.393565v819.148516l614.361387-409.574258z" fill="#ffffff"
                                    p-id="2404"></path>
                                <path d="M153.622524 102.393565v819.148516l614.361387-409.574258z" fill="#ffffff"
                                    p-id="2405"></path>
                                <path d="M259.599863 15.871003V834.507551l619.481066-405.478515z" fill="#ffffff"
                                    p-id="2406"></path>
                                <path d="M261.135767 189.428094l-1.535904 818.636549L875.497154 599.002353z"
                                    fill="#ffffff" p-id="2407"></path>
                                <path
                                    d="M204.819306 102.393565m-102.393564 0a102.393565 102.393565 0 1 0 204.787129 0 102.393565 102.393565 0 1 0-204.787129 0Z"
                                    fill="#ffffff" p-id="2408"></path>
                                <path
                                    d="M819.180694 409.574258c-56.316461 0-102.393565 46.077104-102.393565 102.393565s46.077104 100.345693 102.393565 102.393564c57.852364 2.047871 102.905532-45.053168 102.393564-102.393564-0.511968-56.316461-46.077104-102.393565-102.393564-102.393565zM204.819306 819.148517c-56.316461 0-102.393565 46.077104-102.393564 102.393564s46.077104 100.345693 102.393564 102.393565c53.756621 2.047871 100.857661-45.053168 102.393565-102.393565 1.535903-56.316461-46.077104-102.393565-102.393565-102.393564z"
                                    fill="#ffffff" p-id="2409"></path>
                            </svg>
                        </div>
                        <img src="./poster/1.jpg" alt="pic7">
                    </div>
                    <div class="swiper-slide first-slide">
                        <video loop src="./video/IG-@dustinvalkema.mp4" poster="./poster/2.jpg"></video>
                        <div class="video-cover">
                            <svg t="1684575349179" class="icon" viewBox="0 0 1024 1024" version="1.1"
                                xmlns="http://www.w3.org/2000/svg" p-id="2403" width="200" height="200">
                                <path d="M102.425742 102.393565v819.148516l614.361387-409.574258z" fill="#ffffff"
                                    p-id="2404"></path>
                                <path d="M153.622524 102.393565v819.148516l614.361387-409.574258z" fill="#ffffff"
                                    p-id="2405"></path>
                                <path d="M259.599863 15.871003V834.507551l619.481066-405.478515z" fill="#ffffff"
                                    p-id="2406"></path>
                                <path d="M261.135767 189.428094l-1.535904 818.636549L875.497154 599.002353z"
                                    fill="#ffffff" p-id="2407"></path>
                                <path
                                    d="M204.819306 102.393565m-102.393564 0a102.393565 102.393565 0 1 0 204.787129 0 102.393565 102.393565 0 1 0-204.787129 0Z"
                                    fill="#ffffff" p-id="2408"></path>
                                <path
                                    d="M819.180694 409.574258c-56.316461 0-102.393565 46.077104-102.393565 102.393565s46.077104 100.345693 102.393565 102.393564c57.852364 2.047871 102.905532-45.053168 102.393564-102.393564-0.511968-56.316461-46.077104-102.393565-102.393564-102.393565zM204.819306 819.148517c-56.316461 0-102.393565 46.077104-102.393564 102.393564s46.077104 100.345693 102.393564 102.393565c53.756621 2.047871 100.857661-45.053168 102.393565-102.393565 1.535903-56.316461-46.077104-102.393565-102.393565-102.393564z"
                                    fill="#ffffff" p-id="2409"></path>
                            </svg>
                        </div>
                        <img src="./poster/2.jpg" alt="pic7">
                    </div>
                    <div class="swiper-slide first-slide">
                        <video loop src="./video/INS+jon.lava.mp4" poster="./poster/3.jpg"></video>
                        <div class="video-cover">
                            <svg t="1684575349179" class="icon" viewBox="0 0 1024 1024" version="1.1"
                                xmlns="http://www.w3.org/2000/svg" p-id="2403" width="200" height="200">
                                <path d="M102.425742 102.393565v819.148516l614.361387-409.574258z" fill="#ffffff"
                                    p-id="2404"></path>
                                <path d="M153.622524 102.393565v819.148516l614.361387-409.574258z" fill="#ffffff"
                                    p-id="2405"></path>
                                <path d="M259.599863 15.871003V834.507551l619.481066-405.478515z" fill="#ffffff"
                                    p-id="2406"></path>
                                <path d="M261.135767 189.428094l-1.535904 818.636549L875.497154 599.002353z"
                                    fill="#ffffff" p-id="2407"></path>
                                <path
                                    d="M204.819306 102.393565m-102.393564 0a102.393565 102.393565 0 1 0 204.787129 0 102.393565 102.393565 0 1 0-204.787129 0Z"
                                    fill="#ffffff" p-id="2408"></path>
                                <path
                                    d="M819.180694 409.574258c-56.316461 0-102.393565 46.077104-102.393565 102.393565s46.077104 100.345693 102.393565 102.393564c57.852364 2.047871 102.905532-45.053168 102.393564-102.393564-0.511968-56.316461-46.077104-102.393565-102.393564-102.393565zM204.819306 819.148517c-56.316461 0-102.393565 46.077104-102.393564 102.393564s46.077104 100.345693 102.393564 102.393565c53.756621 2.047871 100.857661-45.053168 102.393565-102.393565 1.535903-56.316461-46.077104-102.393565-102.393565-102.393564z"
                                    fill="#ffffff" p-id="2409"></path>
                            </svg>
                        </div>
                        <img src="./poster/3.jpg" alt="pic7">
                    </div>
                </div>
                Add Pagination
                <div class="swiper-pagination"></div>
            </div>
        </div> -->



    </div>

    <script>
        HTMLElement.prototype.olinear = function (i) {
            if (typeof i !== 'object') return;
            var $el = this;
            var compute = function (i2) {
                var k = 1 / ((i2.x2 - i2.x1) / (i2.y2 - i2.y1));
                var b = i2.y1 - (i2.x1 * k);
                var name = i2.name;
                var unit = i2.unit || '';
                var only = i2.only;
                var res = function (x) {
                    var r = (k * x + b);
                    if (!only) {      //only 不存在 则默认同步修改style 属性
                        $el.style[name] = r + unit;
                    }
                    return r;
                }
                typeof $el[name] === 'object' ? $el[name].v = res : $el[name] = { v: res };

            }
            if (Array.isArray(i)) {   //如果是数组
                i.forEach(function (v) {
                    if (typeof v !== 'object') return;
                    compute(v)
                })
            } else {
                compute(i)
            }
        }

        function setScrollAttr2(ellist, addheight) {       //给元素设置滚动的属性
            var addheight = addheight || 0;
            if (Array.isArray(ellist)) {
                ellist.forEach(function (el) {
                    el.st = Math.max((el.offset().top - document.documentElement.clientHeight) / ($('body').height() - document.documentElement.clientHeight), 0);
                    el.st2 = Math.max((el.offset().top) / ($('body').height() - document.documentElement.clientHeight), 0);
                    var height = Math.max(el.height(), document.documentElement.clientHeight);
                    el.et = Math.max((el.offset().top + height + addheight - document.documentElement.clientHeight) / ($('body').height() - document.documentElement.clientHeight), 0);
                    el.isScroll = function (scroll) {
                        return (scroll >= el.st && scroll < el.et)
                    }
                    el.scrollPos = function (scroll) {
                        return (scroll - el.st) / el.et;
                    }
                    el.isScroll2 = function (scroll) {  //全屏显示完毕时开始fixed
                        return (scroll >= el.st2 && scroll < el.et)
                    }
                })
            } else {
                setScrollAttr2([ellist], addheight);
            }
        }

        var t = function () {
            console.log('test');
        }
        $(window).scroll(t);





        var dynamicLoading = {
            css: function (path) {
                if (!path || path.length === 0) {
                    throw new Error('argument "path" is required !');
                }
                var head = document.getElementsByTagName('head')[0];
                var link = document.createElement('link');
                link.href = path;
                link.rel = 'stylesheet';
                link.type = 'text/css';
                head.appendChild(link);
            },
            js: function (path) {
                if (!path || path.length === 0) {
                    throw new Error('argument "path" is required !');
                }
                var head = document.getElementsByTagName('head')[0];
                var script = document.createElement('script');
                script.src = path;
                script.type = 'text/javascript';
                head.appendChild(script);
            }
        }

        var globalFun = {
            preload: null,
            sectionFun: null,
            transiFun: null,
            setattr: null
        };
        //使transi-hidden样式的元素 拥有淡出效果
        var transupListen = function () {
            var transupList = $('.transi-hidden');
            var $t = $(window).scrollTop();
            var $h = $(window).height();

            transupList.each(function (index) {
                if (this.timer) return;
                var $a = $(this).offset().top;
                var $b = $(this).height();
                if ((($t + $h) > ($a + $b * 0.3)) || (($t < $h) && ($a < $h))) {
                    $(this).addClass('transi-up');
                    var _this = this;
                    this.timer = setTimeout(function () {
                        $(_this).removeClass('transi-hidden');
                    }, 800)
                }
            })
            globalFun.transiFun && globalFun.transiFun();
        }

        //指定元素监听
        var transiEl = function (el, cb, elh, cb2) {
            var $elh = elh || 0.45;
            var $t = $(window).scrollTop();
            var $h = $(window).height();
            var $a = $(el).offset().top;
            var $b = $(el).height();
            var _el = el;
            if ((($t + $h) > ($a + $b * $elh)) || (($t < $h) && ($a < $h))) {
                cb();
            } else {
                cb && cb2()
            }
        }

        // ---------------------------------------------------------------------------------------------------------------------------------------



        var dynamicLoading = {
            css: function (path) {
                if (!path || path.length === 0) {
                    throw new Error('argument "path" is required !');
                }
                var head = document.getElementsByTagName('head')[0];
                var link = document.createElement('link');
                link.href = path;
                link.rel = 'stylesheet';
                link.type = 'text/css';
                head.appendChild(link);
            },
            js: function (path) {
                return new Promise(function (resolve, reject) {
                    if (!path || path.length === 0) {
                        throw new Error('argument "path" is required !');
                    }
                    var head = document.getElementsByTagName('head')[0];
                    var script = document.createElement('script');
                    script.src = path;
                    script.type = 'text/javascript';
                    head.appendChild(script);
                    script.onload = function () {
                        resolve()
                    }
                    script.onerror = function () {
                        reject(new Error('Failed to load script: ' + path));
                    };
                })

            }
        }
        var docWidth = document.documentElement.clientWidth;
        var docHeight = document.documentElement.clientHeight;


        // if (docWidth < 769) {
        //     var tleft = -($('#tab-description-mobile').offset().left)
        //     $('#tab-description-mobile').css({
        //         'width': '100vw',
        //         'position': 'relative',
        //         'margin-left': tleft + 'px'
        //     })
        // } else {
        //     var tleft = -($('#tab-description').offset().left)
        //     $('#tab-description').css({
        //         'width': '100vw',
        //         'position': 'relative',
        //         'margin-left': tleft + 'px'
        //     })
        // }


        var videoEvent = async function () {
            if (docWidth < 769) {
                dynamicLoading.css('https://cdn.shopify.com/s/files/1/0465/9209/8470/files/swiper.min.css?v=1602471839')
                await dynamicLoading.js('https://cdn.shopify.com/s/files/1/0465/9209/8470/files/swiper.min.js?v=1602471827')
                var First = false;
                var swiper = new Swiper('.s8-swiper', {
                    slidesPerView: 2,   //默认可显示slider数量
                    loop: true,
                    slidesPerView: 'auto',
                    centeredSlides: true,
                    spaceBetween: 15,
                    on: {
                        slideChangeTransitionEnd: function () {
                            if (!First) {
                                return First = true;
                            }
                            $('.s8-swiper .swiper-slide').each(function () {
                                var video = $(this).find('video')[0]
                                var post = $(this).find('img')
                                post.hide();
                                var video_cover = $(this).find('.video-cover')
                                video.pause()
                                video_cover.removeClass('cover-hide')
                            })

                            var video = $('.swiper-slide-active').find('video')[0]
                            var post = $('.swiper-slide-active').find('img')
                            post.hide();

                            var video_cover = $('.swiper-slide-active').find('.video-cover')
                            video.play()
                            video_cover.addClass('cover-hide')
                        },
                    }
                });
                $('.s8-swiper .swiper-slide').click(function () {
                    var video = $(this).find('video')[0]
                    var post = $(this).find('img')
                    post.hide();

                    var video_cover = $(this).find('.video-cover')
                    if (video_cover.hasClass('cover-hide')) { //暂停
                        video.pause()
                    } else {
                        video.play()
                    }
                    video_cover.toggleClass('cover-hide')
                })
            } else {
                $('.s8-swiper .swiper-slide').click(function () {
                    var video = $(this).find('video')[0]
                    var post = $(this).find('img')
                    post.hide();

                    var video_cover = $(this).find('.video-cover')
                    if (video_cover.hasClass('cover-hide')) { //暂停
                        video.pause()
                    } else {
                        video.play()
                    }
                    video_cover.toggleClass('cover-hide')
                })
            }
        }


        var s1Event = function () {
            let s1Div = $('.section1 .wrapper'),
                s1Pic = s1Div.find('.wrapper1');
            if (docWidth < 769) {
                s1Div = $('.section .wrapper-mb')
                s1Div.on('touchstart', function (e) {
                    var divLeft = $(this).offset().left;
                    var distenceX = e.touches[0].pageX;
                    var width = e.touches[0].pageX - divLeft;
                    s1Pic.css({
                        'width': width + 'px',
                    });

                    var a = function (e) {
                        e.preventDefault();
                        var moveWidth = e.touches[0].pageX - divLeft;

                        s1Pic.css({
                            'width': moveWidth + 'px',
                        });
                    }
                    document.body.addEventListener('touchmove', a, { passive: false })
                    document.body.addEventListener('touchend', function (e) {
                        document.body.removeEventListener('touchmove', a);
                    })
                });


            } else {
                s1Div.mousedown(function (e) {
                    var divLeft = $(this).offset().left;
                    console.log(divLeft);
                    var distenceX = e.pageX;

                    var width = e.pageX - divLeft;
                    s1Pic.css({
                        'width': width + 'px'
                    })
                    $(document).mousemove(function (e) {
                        e.preventDefault()
                        var moveWidth = e.pageX - divLeft;
                        s1Pic.css({
                            'width': moveWidth + 'px',
                        });
                    });

                    $(document).mouseup(function () {
                        $(document).off('mousemove');
                    });
                })


            }


        }
        const observer = new ResizeObserver(entries => {
            for (let entry of entries) {
                if (entry.target === document.body) {
                    // <body> 元素的大小发生变化
                    // 在这里执行你的操作
                    console.log('重置')
                    animalAll();
                    console.log('重置结束')
                }
            }
        });

        // 监听 <body> 元素的大小变化
        observer.observe(document.body);
        var animalAll = function () {
            s1Animal.removeScroll && s1Animal.removeScroll();
            s1Animal();

            s3Animal.removeScroll && s3Animal.removeScroll();
            s3Animal();

            s4Animal.removeScroll && s4Animal.removeScroll();
            s4Animal();

            s5Animal.removeScroll && s5Animal.removeScroll();
            s5Animal();
        }

        var animalParm = {

        }

        var init = (function () {

            var sectionOther = function () {
                // videoEvent();
                s1Event();
            }

            $(function () {
                preloadimg();
                sectionOther();
                transupListen();
                $(window).scroll(function (event) {   //浏览器滚动呈现动画效果
                    transupListen();        //监听文字上浮元素
                });
                animalAll();
            })

        }())



        var s1Animal = function () {
            var $section1 = $('.section1');
            setScrollAttr2($section1, $section1.height() * 0.3);
            $section1[0].olinear([{
                name: 'scrollPos',
                only: true,
                x1: $section1.st,
                y1: 0,
                x2: $section1.et,
                y2: 1
            }]);
            var $contain = $section1.find('.contain');

            var s1an1top = 0.75;
            var s1an1end = 0.8;
            if (docWidth < 769) {
                s1an1top = 0.65;
                s1an1end = 0.8;
            }

            let s1Div = $('.section1 .wrapper'),
                $s1Pic = s1Div.find('.wrapper1');

            $s1Pic[0].olinear({
                name: 'width',  //当前图片的索引
                only: true,  //不需要style赋值
                x1: s1an1top,
                y1: 0,
                x2: s1an1end,
                y2: 100
            });
            var initStatus = function (status) {    //status = true为进入前的状态 status为false为动画完成后的状态
                status ? $s1Pic[0].style.width = '0%' : $s1Pic[0].style.width = '100%';
                // status ? $s5img.css({ transform: `${center} scale(1.2,1.2)` }) : $s5img.css({ transform: `${center} scale(1,1)` });

            }
            s1Animal.s = function (param) {
                var clientWidth = docWidth;
                var scrollTop = (document.documentElement.scrollTop || window.pageYOffset || document.body.scrollTop) / ($('body').height() - document.documentElement.clientHeight); //换算成0 - 100

                if ($section1.isScroll(scrollTop)) {
                    var top = $section1[0].scrollPos.v(scrollTop);
                    console.log(top.toFixed(2));
                    if (top >= s1an1top && top <= s1an1end) {
                        $s1Pic[0].width.v(top);
                        var width = $s1Pic[0].width.v(top);
                        width = Math.max(width, 0);
                        width = Math.min(width, 100);
                        $s1Pic.css({
                            width: width + '%'
                        });
                    } else if (top < s1an1top) {
                        $s1Pic.css({
                            width: '0%'
                        });
                    } else if (top > s1an1end) {
                        $s1Pic.css({
                            width: '100%'
                        });
                    }
                } else {
                    if (scrollTop < $section1.st) {
                        initStatus(true);
                    } else {
                        initStatus(false);
                    }
                }
            };

            s1Animal.removeScroll = function () {
                console.log('删除事件：s1animate.s')
                $(window).off('scroll', s1Animal.s);
            };
            $(window).scroll(s1Animal.s);
        }

        var s3Animal = function () {
            var $section3 = $('.section3');
            setScrollAttr2($section3);
            $section3[0].olinear([{
                name: 'scrollPos',
                only: true,
                x1: $section3.st,
                y1: 0,
                x2: $section3.et,
                y2: 1
            }]);
            var $contain = $section3.find('.contain'),
                $s3Wrapper = $contain.find('.wrapper'),
                $s3Prod = $s3Wrapper.find('.prod').find('img'),
                $TextBox1 = $contain.find('.fast-text1-box'),
                $Text1 = $TextBox1.find('.text1'),
                $TextBox2 = $contain.find('.fast-text2-box'),
                $Text2 = $TextBox2.find('.text2'),
                $wText1 = $s3Wrapper.find('.text1'),
                $wText2 = $s3Wrapper.find('.text2'),
                $phonePic = $s3Wrapper.find('.phone-pic-wrapper'),
                $phonePicIn = $phonePic.find('.phone-pic'),
                $phoneCharge = $phonePicIn.find('.charge');
            $contain[0].starttop = 0;
            $contain[0].endtop = $section3.height() - $contain.height() - $contain[0].starttop;



            var start = 0,
                snum = 2.3;
            var an1X1 = 0.1 * snum,      //第一屏帧动画X1
                an1X2 = 0.12 * snum,     //第一屏帧动画X2
                an1X2_1 = 0.15 * snum,
                an1X3 = 0.2 * snum,      //第一屏帧动画X2
                an2X1 = 0.21 * snum,      //第一屏帧动画X2
                an2X2 = 0.25 * snum,      //第一屏帧动画X2
                an2X3 = 0.26 * snum,      //第一屏帧动画X2
                an2X3_1 = 0.29 * snum,      //第一屏帧动画X2
                an2X4 = 0.35 * snum;      //第一屏帧动画X2l
            if (docWidth < 769) an2X4 = 0.31 * snum;


            animalParm.s3_w1 ? '' : animalParm.s3_w1 = $s3Wrapper.width()
            animalParm.s3_h1 ? '' : animalParm.s3_h1 = $s3Wrapper.height()

            var w1 = animalParm.s3_w1,
                w2 = docWidth * 1.01,
                h1 = animalParm.s3_h1,
                h2 = docHeight;


            $s3Wrapper[0].olinear({
                name: 'width',  //当前图片的索引
                only: true,  //不需要style赋值
                x1: an1X2,
                y1: w1,
                x2: an1X3,
                y2: w2
            });
            $s3Wrapper[0].olinear({
                name: 'height',  //当前图片的索引
                only: true,  //不需要style赋值
                x1: an1X2,
                y1: h1,
                x2: an1X3,
                y2: h2
            });

            var tx1 = 21,
                tx2 = 0,
                rotate1 = 45,
                rotate2 = 0;
            if (docWidth < 769) tx1 = 0;
            $s3Prod[0].olinear({
                name: 'rotate',  //当前图片的索引
                only: true,  //不需要style赋值
                x1: an1X2,
                y1: rotate1,
                x2: an1X3,
                y2: rotate2
            });

            $phonePicIn[0].olinear({
                name: 'transX',  //当前图片的索引
                only: true,  //不需要style赋值
                x1: an2X3_1,
                y1: tx1,
                x2: an2X4,
                y2: tx2
            });




            animalParm.s3_l1 ? '' : animalParm.s3_l1 = parseInt($TextBox1.css('left'))
            animalParm.s3_t1 ? '' : animalParm.s3_t1 = parseInt($TextBox1.css('top'));


            var l1 = animalParm.s3_l1,
                l2 = 0,
                t1 = animalParm.s3_t1,
                t2 = 0;

            $TextBox1[0].olinear({
                name: 'left',  //当前图片的索引
                only: true,  //不需要style赋值
                x1: an1X2,
                y1: l1,
                x2: an1X3,
                y2: l2
            });

            $TextBox1[0].olinear({
                name: 'top',  //当前图片的索引
                only: true,  //不需要style赋值
                x1: an1X2,
                y1: t1,
                x2: an1X3,
                y2: t2
            });

            animalParm.s3_r1 ? '' : animalParm.s3_r1 = parseInt($TextBox2.css('right'))
            animalParm.s3_b1 ? '' : animalParm.s3_b1 = parseInt($TextBox2.css('bottom'));

            var r1 = animalParm.s3_r1,
                r2 = 0,
                b1 = animalParm.s3_b1,
                b2 = 0;

            $TextBox2[0].olinear({
                name: 'right',  //当前图片的索引
                only: true,  //不需要style赋值
                x1: an1X2,
                y1: r1,
                x2: an1X3,
                y2: r2
            });

            $TextBox2[0].olinear({
                name: 'bottom',  //当前图片的索引
                only: true,  //不需要style赋值
                x1: an1X2,
                y1: b1,
                x2: an1X3,
                y2: b2
            });

            var top = 0,
                ty = 8;
            if (docWidth < 769) ty = 3;
            var toFixTop = 1 - (($section3.height() - $contain.height()) / $section3.height());
            var initStatus = function (status) {    //status = true为进入前的状态 status为false为动画完成后的状态
                // status ? $s1Pic[0].style.width = '0%' : $s1Pic[0].style.width = '100%';
                // status ? $s5img.css({ transform: `${center} scale(1.2,1.2)` }) : $s5img.css({ transform: `${center} scale(1,1)` });

            }
            var addwill = function (status) {       //添加will
                if (status === addwill.flag) return;
                status ? addwill.flag = true : addwill.flag = false;
                // status ? $(prdnameEl).addClass('will') : $(prdnameEl).removeClass('will');
                if (docWidth > 769) {

                }
            }
            s3Animal.s = function (param) {
                var clientWidth = docWidth;
                var scrollTop = (document.documentElement.scrollTop || window.pageYOffset || document.body.scrollTop) / ($('body').height() - document.documentElement.clientHeight); //换算成0 - 100

                if ($section3.isScroll(scrollTop)) {
                    addwill(true);
                    top = $section3[0].scrollPos.v(scrollTop);
                    if (top > an1X1) {
                        $s3Wrapper.removeClass('an1')
                        $Text1.removeClass('an1')
                        $Text2.removeClass('an1')
                    } else {
                        $s3Wrapper.addClass('an1')
                        $Text1.addClass('an1')
                        $Text2.addClass('an1')
                    }

                    if (top > an1X2 && top < an1X3) {
                        var width = $s3Wrapper[0].width.v(top);
                        width = Math.max(width, w1);
                        width = Math.min(width, w2);
                        var height = $s3Wrapper[0].height.v(top);
                        height = Math.max(height, w1);
                        height = Math.min(height, w2);
                        $s3Wrapper.css({
                            width: width + 'px',
                            height: height + 'px',
                        })

                        var rotate = $s3Prod[0].rotate.v(top);
                        rotate = Math.max(rotate, rotate2);
                        rotate = Math.min(rotate, rotate1);

                        $s3Prod.css({
                            transform: `translateY(${ty}%) rotate(${rotate}deg)`,
                        })


                        var left = $TextBox1[0].left.v(top);
                        left = Math.max(left, l2);
                        left = Math.min(left, l1);
                        var topD = $TextBox1[0].top.v(top);
                        topD = Math.max(topD, t2);
                        topD = Math.min(topD, t1);
                        $TextBox1.css({
                            left: left + 'px',
                            top: topD + 'px',
                        })


                        var right = $TextBox2[0].right.v(top);
                        right = Math.max(right, r2);
                        right = Math.min(right, r1);
                        var bottom = $TextBox2[0].bottom.v(bottom);
                        bottom = Math.max(bottom, b2);
                        bottom = Math.min(bottom, b1);
                        $TextBox2.css({
                            right: right + 'px',
                            bottom: bottom + 'px',
                        })


                    } else if (top < an1X2) {
                        $s3Wrapper.css({
                            width: w1 + 'px',
                            height: h1 + 'px'
                        })
                        $s3Prod.css({
                            transform: `translateY(${ty}%) rotate(${rotate1}deg)`,
                        })
                        $TextBox1.css({
                            left: l1 + 'px',
                            top: t1 + 'px',
                        })
                        $TextBox2.css({
                            right: r1 + 'px',
                            bottom: b1 + 'px',
                        })
                    } else if (top > an1X3) {
                        $s3Wrapper.css({
                            width: w2 + 'px',
                            height: h2 + 'px'
                        })
                        $s3Prod.css({
                            transform: `translateY(${ty}%) rotate(${rotate2}deg)`,
                        })
                        $TextBox1.css({
                            left: l2 + 'px',
                            top: t2 + 'px',
                        })
                        $TextBox2.css({
                            right: r2 + 'px',
                            bottom: b2 + 'px',
                        })
                    }

                    if (top > an1X2_1) {
                        $TextBox1.removeClass('an2')
                        $TextBox2.removeClass('an2')
                    } else {
                        $TextBox1.addClass('an2')
                        $TextBox2.addClass('an2')
                    }

                    if (top > an2X1) {
                        $wText1.removeClass('an2')
                    } else {
                        $wText1.addClass('an2')
                    }

                    if (top > an2X2) {
                        $wText2.removeClass('an2')
                    } else {
                        $wText2.addClass('an2')
                    }

                    if (top > an2X3) {
                        $phonePic.removeClass('an3')
                    } else {
                        $phonePic.addClass('an3')
                    }


                    if (top > an2X3_1 && top < an2X4) {
                        var transX = $phonePicIn[0].transX.v(top);
                        transX = Math.max(transX, tx2);
                        transX = Math.min(transX, tx1);
                        $phonePicIn.css({
                            transform: `translateX(${transX}vw)`,
                        })
                        $phoneCharge.addClass('an4');
                    } else if (top < an2X3_1) {
                        $phonePicIn.css({
                            transform: `translateX(${tx1}vw)`,
                        })
                        $phoneCharge.addClass('an4');
                    } else if (top > an2X4) {
                        $phonePicIn.css({
                            transform: `translateX(${tx2}vw)`,
                        })
                        $phoneCharge.removeClass('an4');
                    }

                    if (top > toFixTop) {
                        $contain.css({
                            top: $contain[0].starttop + 'px'
                        })
                        $contain.addClass('sticky');
                    } else {
                        $contain.removeClass('sticky');
                    }

                } else if ($contain.hasClass('sticky') || param === 'resize') {
                    $contain.removeClass('sticky');
                    addwill(false);
                    if (scrollTop < $section3.st) {
                        initStatus(true);
                        $contain.css({
                            top: 0 + 'px'
                        });
                    } else {
                        initStatus(false);
                        $contain.css({
                            top: $contain[0].endtop + 'px'
                        });
                    }
                }
            };

            s3Animal.removeScroll = function () {
                console.log('删除事件：s3animate.s')
                $(window).off('scroll', s3Animal.s);
            };
            $(window).scroll(s3Animal.s);
        }

        var s4Animal = function () {
            var $section4 = $('.section4');
            setScrollAttr2($section4);
            $section4[0].olinear([{
                name: 'scrollPos',
                only: true,
                x1: $section4.st,
                y1: 0,
                x2: $section4.et,
                y2: 1
            }]);
            var $contain = $section4.find('.contain');


            var $text1Wrapper = $contain.find('.text1-wrapper'),
                $text1 = $text1Wrapper.find('.text1'),
                $text2 = $contain.find('.text2'),
                $prodWrapper = $contain.find('.prod-wrapper');

            var s4an1top = 0.4,
                s4an2top = 0.7,
                s4an3top = 0.85;
            if (docWidth < 769) s4an3top = s4an2top
            var s5an1end = 0.7,
                s5an2top = 0.8;
            if (docWidth < 769) {
                s5an1top = 0.35;
                s5an1end = 0.7;
                s5an2top = 0.7;
            }

            var toFixTop = 1 - (($section4.height() - $contain.height()) / $section4.height());
            var center = 'translate(-50%, -50%)';

            // if (docWidth < 769) {
            //     center = 'translate(0, -50%)';
            // }
            var initStatus = function (status) {    //status = true为进入前的状态 status为false为动画完成后的状态
                // status ? $s5imgbox[0].style.width = '50%' : $s5imgbox[0].style.width = '100%';
                // status ? $s5img.css({ transform: `${center} scale(1.2,1.2)` }) : $s5img.css({ transform: `${center} scale(1,1)` });

            }
            var s5an1Done = false;
            s4Animal.s = function (param) {
                var clientWidth = docWidth;
                var scrollTop = (document.documentElement.scrollTop || window.pageYOffset || document.body.scrollTop) / ($('body').height() - document.documentElement.clientHeight); //换算成0 - 100

                if ($section4.isScroll(scrollTop)) {
                    var top = $section4[0].scrollPos.v(scrollTop);
                    console.log(top.toFixed(2));

                    if (top > s4an1top) {
                        $text1Wrapper.removeClass('an1')
                    } else {
                        $text1Wrapper.addClass('an1')
                    }

                    if (top > s4an2top) {
                        $prodWrapper.removeClass('an1')
                    } else {
                        $prodWrapper.addClass('an1')
                    }

                    if (top > s4an3top) {
                        $text1.removeClass('an2')
                        $text2.removeClass('an1')
                    } else {
                        $text1.addClass('an2')
                        $text2.addClass('an1')
                    }
                } else {
                    if (scrollTop < $section4.st) {
                        initStatus(true);
                        $contain.css({
                            top: 0 + 'px'
                        });
                    } else {
                        initStatus(false);
                        $contain.css({
                            top: $contain[0].endtop + 'px'
                        });
                    }
                }
            };

            s4Animal.removeScroll = function () {
                console.log('删除事件：s4animate.s')
                $(window).off('scroll', s4Animal.s);
            };
            $(window).scroll(s4Animal.s);
        }

        var s5Animal = function () {
            var $section5 = $('.section5');
            setScrollAttr2($section5);

            $section5[0].olinear([{
                name: 'scrollPos',
                only: true,
                x1: $section5.st,
                y1: 0,
                x2: $section5.et,
                y2: 1
            }]);
            var $contain = $section5.find('.contain'),
                $textBox = $section5.find('.text-box'),
                $prod1 = $contain.find('.prod1'),
                $prod1Pic = $prod1.find('img');
            $contain[0].starttop = 0;
            $contain[0].endtop = $section5.height() - $contain.height() - $contain[0].starttop;


            // if(docWidth > )

            var start = 0,
                snum = 1;
            var an1X1 = 0.4 * snum,     //第一屏帧动画X1
                an1X1_2 = 0.55 * snum,       //
                an1X2 = 0.6 * snum;     //第一屏帧动画X2

            animalParm.s5_l1 ? '' : animalParm.s5_l1 = parseInt($prod1.css('left'))

            var l1 = animalParm.s5_l1,
                l2 = docWidth * 0.425;
            if (docWidth < 769) an1X2 = 0.8
            $prod1[0].olinear({
                name: 'left',  //当前图片的索引
                only: true,  //不需要style赋值
                x1: an1X1,
                y1: l1,
                x2: an1X2,
                y2: l2
            });

            var r1 = -30,
                r2 = 0;
            $prod1[0].olinear({
                name: 'rotate',  //当前图片的索引
                only: true,  //不需要style赋值
                x1: an1X1_2,
                y1: r1,
                x2: an1X2,
                y2: r2
            });

            var top = 0;
            var toFixTop = 1 - (($section5.height() - $contain.height()) / $section5.height());
            var w2 = 50,
                wNum = 0.03;
            if (docWidth < 769) {
                w2 = 95;
                wNum = -0.02
            }
            var initStatus = function (status) {    //status = true为进入前的状态 status为false为动画完成后的状态
                // status ? $s1Pic[0].style.width = '0%' : $s1Pic[0].style.width = '100%';
                // status ? $s5img.css({ transform: `${center} scale(1.2,1.2)` }) : $s5img.css({ transform: `${center} scale(1,1)` });

            }
            var addwill = function (status) {       //添加will
                if (status === addwill.flag) return;
                status ? addwill.flag = true : addwill.flag = false;
                // status ? $(prdnameEl).addClass('will') : $(prdnameEl).removeClass('will');
                if (docWidth > 769) {

                }
            }
            s5Animal.s = function (param) {
                var clientWidth = docWidth;
                var scrollTop = (document.documentElement.scrollTop || window.pageYOffset || document.body.scrollTop) / ($('body').height() - document.documentElement.clientHeight); //换算成0 - 100

                if ($section5.isScroll(scrollTop)) {
                    addwill(true);
                    top = $section5[0].scrollPos.v(scrollTop);
                    console.log(top.toFixed(2));



                    if (top > an1X1 && top < an1X2) {
                        var left = $prod1[0].left.v(top);
                        left = Math.max(left, l1);
                        left = Math.min(left, l2);

                        var width = left - l1 - docWidth * wNum;
                        $textBox.css({
                            width: width + 'px'
                        })
                        $prod1.css({
                            left: left + 'px'
                        })
                    } else if (top < an1X1) {
                        $prod1.css({
                            left: l1 + 'px'
                        })
                        $textBox.css({
                            width: 0
                        })
                    } else if (top > an1X2) {
                        $textBox.css({
                            width: w2 + 'vw'
                        })
                        $prod1.css({
                            left: l2 + 'px'
                        })
                    }

                    if (top > an1X1_2 && top < an1X2) {
                        var rotate = $prod1[0].rotate.v(top);
                        rotate = Math.max(rotate, r1);
                        rotate = Math.min(rotate, r2);

                        $prod1.css({
                            transform: `rotate(${rotate}deg)`,
                        })
                        $prod1Pic.addClass('an1')

                    } else if (top < an1X1_2) {
                        $prod1.css({
                            transform: `rotate(${r1}deg)`,
                        })
                        $prod1Pic.addClass('an1')

                    } else if (top > an1X2) {
                        $prod1.css({
                            transform: `rotate(${r2}deg)`,
                        })
                        $prod1Pic.removeClass('an1')
                    }
                    if (docWidth > 769) {
                        if (top > toFixTop) {
                            $contain.css({
                                top: $contain[0].starttop + 'px'
                            })
                            $contain.addClass('sticky');
                        } else {
                            $contain.removeClass('sticky');
                        }
                    }


                } else if ($contain.hasClass('sticky') || param === 'resize') {
                    $contain.removeClass('sticky');
                    addwill(false);
                    if (scrollTop < $section5.st) {
                        initStatus(true);
                        $contain.css({
                            top: 0 + 'px'
                        });
                    } else {
                        initStatus(false);
                        $contain.css({
                            top: $contain[0].endtop + 'px'
                        });
                    }
                }
            };

            s5Animal.removeScroll = function () {
                console.log('删除事件：s5animate.s')
                $(window).off('scroll', s5Animal.s);
            };
            $(window).scroll(s5Animal.s);
        }


        var preloadimg = function () {        //加载图片
            var loadNum = 0;
            var pixelEl = document.querySelector('.fav-new-desc');
            var preImg = pixelEl.querySelectorAll('img')
            preImg.forEach(function (el) {
                var src = el.getAttribute('data-src');
                if (docWidth < 769) {
                    var mbsrc = el.getAttribute('data-mbsrc');
                    mbsrc ? src = mbsrc : '';
                    if (mbsrc == 'hide') {
                        el.style.display = 'none'
                        src = ''
                    }
                }
                src ? el.src = src : '';
            })
        };






    </script>
</body>

</html>